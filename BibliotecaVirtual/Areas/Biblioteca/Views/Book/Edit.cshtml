@model BookViewModel
@{
    string ActionName = Html.ActionName();
}

<div>
    <header class="heading">
        @{
            if (String.IsNullOrEmpty(ActionName) == false)
            {
                if (ActionName == "Add")
                {
                    <h2 id="tituloFormulario">Adicionando livro</h2>
                }
                else if (ActionName == "Edit")
                {
                    <h2 id="tituloFormulario">Alterando livro</h2>
                }
            }
        }
    </header>
</div>

<form asp-action="@ActionName" method="post">
    @{ await Html.RenderPartialAsync("_ValidationSummary"); }
    <fieldset>
        <div class="col-sm-12 row no-margin no-padding">
            @{
                if (ActionName == "Edit")
                {
                    <div class="col-sm-3 col-md-2 form-group">
                        <label class="label" asp-for="@Model.BookId"></label>
                        <label class="input">
                            <i class="icon-append fa fa-key"></i>
                            <input asp-for="@Model.BookId" class="form-control" readonly />
                            <span asp-validation-for="@Model.BookId" class="text-danger"></span>
                        </label>
                    </div>
                    <div class="col-sm-9 col-md-8 form-group">
                        <label class="label" asp-for="@Model.Title"></label>
                        <input asp-for="@Model.Title" class="form-control" />
                        <span asp-validation-for="@Model.Title" class="text-danger"></span>
                    </div>
                }
                else
                {
                    <div class="col-sm-12 col-md-10 form-group">
                        <label class="label" asp-for="@Model.Title"></label>
                        <input asp-for="@Model.Title" class="form-control" />
                        <span asp-validation-for="@Model.Title" class="text-danger"></span>
                    </div>
                }

                <div class="col-sm-12 col-md-2">
                    <label class="label" asp-for="@Model.PublishDate"></label>
                    <input asp-for="@Model.PublishDate" class="form-control" type="date" />
                    <span asp-validation-for="@Model.PublishDate" class="text-danger"></span>
                </div>

                <div class="col-sm-12 col-md-12 form-group">
                    <label class="label" asp-for="@Model.Description"></label>
                    <textarea asp-for="@Model.Description" class="form-control"></textarea>
                    <span asp-validation-for="@Model.Description" class="text-danger"></span>
                </div>
                <div class="col-sm-12 col-md-12 form-group">
                    <label class="label" asp-for="@Model.Sinopsis"></label>
                    <textarea asp-for="@Model.Sinopsis" class="form-control"></textarea>
                    <span asp-validation-for="@Model.Sinopsis" class="text-danger"></span>
                </div>
                <div class="col-sm-12 col-md-5 form-group">
                    <label class="label" asp-for="@Model.AuthorId"></label>
                    <select asp-for="@Model.AuthorId" class="form-control"></select>
                    <span asp-validation-for="@Model.AuthorId" class="text-danger"></span>
                </div>
                <div class="col-sm-12 col-md-5 form-group">
                    <label class="label" asp-for="@Model.PublisherId"></label>
                    <select asp-for="@Model.PublisherId" class="form-control"></select>
                    <span asp-validation-for="@Model.PublisherId" class="text-danger"></span>
                </div>
                <div class="col-sm-12 col-md-2">
                    <label class="label" asp-for="@Model.Pages"></label>
                    <input asp-for="@Model.Pages" class="form-control" />
                    <span asp-validation-for="@Model.Pages" class="text-danger"></span>
                </div>
                <div class="col-sm-12 col-md-12 form-group">
                    <label class="label" asp-for="@Model.CoverImageBase64"></label>
                    <input type="hidden" asp-for="@Model.CoverImageBase64" class="form-control img-output" readonly />
                    <span asp-validation-for="@Model.CoverImageBase64" class="text-danger"></span>

                    @await Component.InvokeAsync(typeof(ImagemDropzoneViewComponent), new { extensoesImagensAceitas = "*" })
                </div>
            }
        </div>
    </fieldset>

    @{ await Html.RenderPartialAsync("_FormButtons",
              new FormButtonsViewModel(nameof(BookViewModel.BookId), Model?.BookId)); }
</form>
