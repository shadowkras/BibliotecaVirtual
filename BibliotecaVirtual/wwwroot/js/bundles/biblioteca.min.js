function autor(){$("#selectAuthor").length&&(autor.vueSelect=new Vue({el:"#selectAuthor",data:{selectAuthor:[],isEmpty:this.selectPublisher.length==0,selectedValue:-1},methods:{obterOpcoes:function(){var n=site.url+"biblioteca/author/getauthors";$.get(n,{}).done(function(n){if(n&&n.length){let t=n;autor.vueSelect.atualizarLista(t)}$("#selectAuthor .carregando").addClass("hidden")})},atualizarLista:function(n){this.selectAuthor=n;this.$forceUpdate()},setSelectedValue:function(n){n&&(this.selectedValue=n)},getAuthorId:function(n){return n.authorId},getAuthorName:function(n){return n.name},newAuthor:function(n){window.open(n,"_blank")}},created:function(){this.obterOpcoes()}}))}function categoria(){$("#selectCategory").length&&($("#selectPublisher").change(function(){if(e.target.options.selectedIndex>-1){let n=[],t=e.target.options[e.target.options.selectedIndex].value;categoria.vueSelect.selectedValues.push(t);n=categoria.vueSelect.selectedValues.filter(n=>n!==t);console.log(n)}}),categoria.vueSelect=new Vue({el:"#selectCategory",data:{selectCategory:[],selectedValues:[],loaded:!1},methods:{obterOpcoes:function(){var n=site.url+"biblioteca/category/getcategories";$.get(n,{}).done(function(n){if(n&&n.length){let t=n;categoria.vueSelect.atualizarLista(t)}$("#selectCategory .carregando").addClass("hidden")})},atualizarLista:function(n){this.selectCategory=n;this.loaded=!0;this.$forceUpdate()},isEmpty:function(){return this.selectCategory.length==0||!1},setSelectedValues:function(n){var t;(loaded==!1&&typeof n=="string"||n instanceof String)&&(n.search(",")!==-1?(t=n.split(","),this.selectedValues=t):(t=[n],this.selectedValues=t))},getCategoryId:function(n){return n.categoryId},getCategoryName:function(n){return n.description},newCategory:function(n){window.open(n,"_blank")}},created:function(){this.obterOpcoes()}}))}function editora(){$("#selectPublisher").length&&(editora.vueSelect=new Vue({el:"#selectPublisher",data:{selectPublisher:[],isEmpty:this.selectPublisher.length==0,selectedValue:-1},methods:{obterOpcoes:function(){var n=site.url+"biblioteca/publisher/getpublishers";$.get(n,{}).done(function(n){if(n&&n.length){let t=n;editora.vueSelect.atualizarLista(t)}$("#selectPublisher .carregando").addClass("hidden")})},atualizarLista:function(n){this.selectPublisher=n;this.$forceUpdate()},setSelectedValue:function(n){n&&(this.selectedValue=n)},getPublisherId:function(n){return n.publisherId},getPublisherName:function(n){return n.name},newPublisher:function(n){window.open(n,"_blank")}},created:function(){this.obterOpcoes()}}))}function tooltips(){tooltips.atualizar=function(n){$(n).not("[rel*=popover]").tooltip({delay:{show:500,hide:200}})};$(document).ready(function(){tooltips.atualizar("[data-original-title]")})}var site={};site.url=location.protocol+"//"+location.host+"/";Object.freeze(site);autor();categoria();editora();$(document).ready(function(){let n="";$(".img-output").length&&$(".img-output").each(function(){let t=$(this).parent().find(".imagem-dropzone");if(t.length){let i=t.parent().find(".img-output").val();i.length?($img=$("<img />").attr("src",i).fadeIn(),t.find(".imagem-dropzone-texto").hide(),t.find(".imagem-dropzone-src").html($img),t.find(".imagem-dropzone-btn-remover").show(),n="Imagem selecionada",t.find('.imagem-dropzone-borda input[type="file"]').attr("title",n)):(n="Nenhuma imagem selecionada",t.find('.imagem-dropzone-borda input[type="file"]').attr("title",n))}});$(".imagem-dropzone .imagem-dropzone-btn-remover").click(function(){let t=$(this).parents(".imagem-dropzone");t.length&&(t.find(".imagem-dropzone-texto").show(),t.find(".imagem-dropzone-src img").removeAttr("src").attr("src",""),t.parent().find(".img-output").attr("value",""),t.find('.imagem-dropzone-borda input[type="file"]').val(null),t.find(".imagem-dropzone-btn-remover").hide(),n="Nenhuma imagem selecionada",t.find('.imagem-dropzone-borda input[type="file"]').attr("title",n))});$(".imagem-dropzone .imagem-dropzone-borda").on("dragover",function(){$(this).addClass("hover")});$(".imagem-dropzone .imagem-dropzone-borda").on("dragleave",function(){$(this).removeClass("hover")});$('.imagem-dropzone input[type="file"]').on("change",function(){var i,r,u;let t=$(this).parents(".imagem-dropzone");if(t.length&&this.files.length>0){if(i=this.files[0],this.accept&&$.inArray(i.type,this.accept.split(/, ?/))===-1){smartBox.Aviso(null,"Cancelado!","Verifique o formato do arquivo e tente novamente.",6e3);t.find('.imagem-dropzone-borda input[type="file"]').attr("title",n);t.find(".imagem-dropzone-borda").removeClass("hover");return}t.find(".imagem-dropzone-borda").removeClass("hover");t.find(".imagem-dropzone-texto").hide();t.find(".imagem-dropzone-borda").addClass("dropped");t.find(".imagem-dropzone-src img").length&&t.find(".imagem-dropzone-src").removeAttr("img");/^image\/(jpg|png|jpeg)$/i.test(i.type)?(r=new FileReader(i),r.readAsDataURL(i),r.onload=function(i){var r=i.target.result,e=$("<img />").attr("src",r).fadeIn(),u,f;t.find(".imagem-dropzone-src").html(e);u=r.split(",")[1];f=t.parent().find(".img-output");f.attr("value",u).valid();t.find(".imagem-dropzone-btn-remover").show();n="Imagem selecionada";t.find('.imagem-dropzone-borda input[type="file"]').attr("title",n)}):(u=i.name.split(".").pop(),t.find(".imagem-dropzone-src").html(u))}})});tooltips();